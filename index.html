<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simul√°tor Miliard√°≈ôe</title>
    <style>
        :root { --bg: #f0f2f5; --card: #ffffff; --text: #1d1d1f; --accent: #007aff; --green: #28a745; --red: #dc3545; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        
        /* Spoleƒçn√© styly */
        h1 { margin-top: 40px; text-align: center; }
        button { cursor: pointer; font-family: inherit; }
        
        /* MENU */
        #main-menu { padding: 20px; text-align: center; width: 100%; max-width: 1000px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-top: 30px; }
        .card { background: var(--card); border-radius: 20px; padding: 30px; transition: 0.3s; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 2px solid transparent; }
        .card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); border-color: var(--accent); }
        .card-icon { font-size: 60px; margin-bottom: 15px; }

        /* HRA: UTR√ÅCEN√ç */
        #game-spend { display: none; width: 100%; max-width: 1200px; padding: 20px; padding-bottom: 150px; /* m√≠sto pro ko≈°√≠k dole */ }
        
        /* Horn√≠ li≈°ta s penƒõzi */
        .sticky-header { position: sticky; top: 0; background: rgba(255,255,255,0.95); padding: 15px 20px; border-radius: 0 0 20px 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); z-index: 100; display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px); }
        .balance { font-size: 1.8rem; font-weight: bold; color: var(--green); }
        .controls button { padding: 10px 20px; border-radius: 50px; border: none; font-weight: bold; margin-left: 10px; }
        .btn-back { background: #e4e6eb; color: black; }
        .btn-reset { background: var(--red); color: white; }

        /* Obchod */
        .shop-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-top: 20px; }
        .item { background: white; padding: 20px; border-radius: 15px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: 0.2s; }
        .item:hover { transform: scale(1.02); }
        .item img { height: 60px; margin-bottom: 10px; display: block; margin: 0 auto; }
        .item h3 { font-size: 1.1rem; margin: 5px 0; }
        .price { color: var(--green); font-weight: bold; display: block; margin-bottom: 10px; }
        
        .buy-controls { display: flex; justify-content: space-between; align-items: center; background: #f0f2f5; border-radius: 50px; padding: 5px; }
        .buy-btn { background: var(--green); color: white; border: none; width: 30px; height: 30px; border-radius: 50%; font-weight: bold; font-size: 1.2rem; }
        .buy-btn.sell { background: var(--red); }
        .amount-badge { font-weight: bold; font-size: 1.1rem; }

        /* SPODN√ç √öƒåTENKA (Ko≈°√≠k) */
        .receipt-panel { position: fixed; bottom: 0; left: 0; width: 100%; background: white; box-shadow: 0 -5px 20px rgba(0,0,0,0.15); transform: translateY(85%); transition: transform 0.3s; z-index: 200; border-radius: 20px 20px 0 0; }
        .receipt-panel.open { transform: translateY(0); }
        
        .receipt-header { padding: 15px 30px; cursor: pointer; background: #333; color: white; border-radius: 20px 20px 0 0; display: flex; justify-content: space-between; font-weight: bold; }
        .receipt-content { padding: 30px; max-height: 50vh; overflow-y: auto; font-family: 'Courier New', monospace; }
        
        .receipt-list { margin-bottom: 20px; border-bottom: 2px dashed #ccc; padding-bottom: 20px; }
        .receipt-item { display: flex; justify-content: space-between; margin-bottom: 5px; }
        
        .checkout-btn { width: 100%; padding: 15px; background: black; color: white; border: none; font-size: 1.2rem; font-weight: bold; border-radius: 10px; margin-top: 10px; }

        /* LOADING & MODAL */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 999; justify-content: center; align-items: center; flex-direction: column; color: white; text-align: center; }
        .spinner { border: 5px solid rgba(255,255,255,0.3); border-top: 5px solid white; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* FOOTER NA HLAVN√ç STR√ÅNCE */
        .main-footer { margin-top: 50px; padding-bottom: 20px; display: flex; gap: 10px; justify-content: center; }
        .f-btn { padding: 10px 20px; border-radius: 50px; border: none; font-weight: bold; cursor: pointer; text-decoration: none; display: inline-block; }
    </style>
</head>
<body>

    <div id="main-menu">
        <h1>üí∏ Simul√°tor ≈æivota</h1>
        <div class="grid">
            <div class="card" onclick="startGame()">
                <div class="card-icon">ü§ë</div>
                <h3>Utratit 100 Miliard</h3>
                <p>M√°≈° neomezen√Ω budget. Zkus to v≈°echno utratit!</p>
            </div>
            <div class="card" style="opacity: 0.6; cursor: not-allowed;">
                <div class="card-icon">‚õèÔ∏è</div>
                <h3>Clicker (Brzy)</h3>
                <p>Pracujeme na tom...</p>
            </div>
        </div>

        <div class="main-footer">
            <button class="f-btn" style="background: #ffdd00;" onclick="toggleQR()">üéÅ Podpo≈ôit tv≈Ørce</button>
            <a href="mailto:jinlongjou@gmail.com" class="f-btn" style="background: #007aff; color: white;">üìß Napsat mi</a>
        </div>
        
        <div id="qr-display" style="display:none; margin-top: 20px;">
            <img src="qr.jpeg" style="width: 200px; border-radius: 10px;" alt="QR Code">
        </div>
    </div>

    <div id="game-spend">
        <div class="sticky-header">
            <div>
                <div style="font-size: 0.8rem; color: #666;">Z≈Østatek:</div>
                <div class="balance" id="display-money">100,000,000,000 Kƒç</div>
            </div>
            <div class="controls">
                <button class="btn-reset" onclick="resetGame()">‚Üª Reset</button>
                <button class="btn-back" onclick="goHome()">Zpƒõt</button>
            </div>
        </div>

        <div class="shop-grid" id="shop-container">
            </div>

        <div class="receipt-panel" id="receipt-panel">
            <div class="receipt-header" onclick="toggleReceipt()">
                <span>üßæ Tv≈Øj n√°kupn√≠ ko≈°√≠k</span>
                <span id="cart-total-preview">0 Kƒç (Klikni pro otev≈ôen√≠)</span>
            </div>
            <div class="receipt-content">
                <h2>√öƒçtenka</h2>
                <div class="receipt-list" id="receipt-list">
                    <p>Ko≈°√≠k je pr√°zdn√Ω...</p>
                </div>
                <div style="text-align: right; font-weight: bold; font-size: 1.2rem; margin-bottom: 20px;">
                    CELKEM: <span id="cart-total-final">0 Kƒç</span>
                </div>
                <button class="checkout-btn" onclick="checkout()">üí∏ ZAPLATIT A ODESLAT</button>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="payment-modal">
        <div class="spinner"></div>
        <h2 id="modal-text">Prob√≠h√° platba...</h2>
        <p id="modal-subtext">Spojuji se s bankou ve ≈†v√Ωcarsku...</p>
        <button id="modal-close" style="display:none; margin-top: 20px; padding: 10px 30px; background: white; border: none; border-radius: 50px; font-weight: bold; cursor: pointer;" onclick="closeModal()">Zav≈ô√≠t</button>
    </div>

    <script>
        const INITIAL_MONEY = 100000000000; // 100 Miliard
        let money = INITIAL_MONEY;
        let cart = {}; // Ukl√°d√° co jsi koupil: { "Rohl√≠k": 5, "Auto": 1 }

        // Seznam vƒõc√≠ - p≈ôidej si sem co chce≈°!
        const items = [
            { name: "Rohl√≠k", price: 3, icon: "ü•ê" },
            { name: "Pono≈æky v sand√°lech", price: 150, icon: "üß¶" },
            { name: "L√≠stek na vlak (zpo≈ædƒõn√Ω)", price: 400, icon: "üöÜ" },
            { name: "Ojet√° Felicie", price: 25000, icon: "üöó" },
            { name: "Hern√≠ PC", price: 80000, icon: "üíª" },
            { name: "Rolexky", price: 500000, icon: "‚åö" },
            { name: "Tank", price: 2500000, icon: "üöú" },
            { name: "Vila na O≈ôechovce", price: 50000000, icon: "üè†" },
            { name: "Soukrom√Ω trysk√°ƒç", price: 800000000, icon: "‚úàÔ∏è" },
            { name: "Mona Lisa", price: 15000000000, icon: "üñºÔ∏è" },
            { name: "Cel√Ω Twitter (X)", price: 44000000000, icon: "‚ùå" }
        ];

        // --- FUNKCE PRO HRU ---

        function initShop() {
            const container = document.getElementById('shop-container');
            container.innerHTML = '';
            items.forEach((item, index) => {
                container.innerHTML += `
                    <div class="item">
                        <div style="font-size: 50px; margin-bottom: 10px;">${item.icon}</div>
                        <h3>${item.name}</h3>
                        <span class="price">${formatMoney(item.price)}</span>
                        
                        <div class="buy-controls">
                            <button class="buy-btn sell" onclick="updateCart(${index}, -1)">-</button>
                            <span class="amount-badge" id="count-${index}">0</span>
                            <button class="buy-btn" onclick="updateCart(${index}, 1)">+</button>
                        </div>
                    </div>
                `;
            });
        }

        function updateCart(index, change) {
            const item = items[index];
            const currentCount = cart[item.name] || 0;
            const newCount = currentCount + change;

            // Nem≈Ø≈æe≈° m√≠t m√≠≈à ne≈æ 0 kus≈Ø
            if (newCount < 0) return;

            // M√°≈° na to pen√≠ze? (p≈ôi n√°kupu)
            if (change > 0 && money < item.price) {
                alert("Do≈°ly prachy, ≈°√©fe!");
                return;
            }

            // Update logiky
            cart[item.name] = newCount;
            money -= (item.price * change);
            
            // Update grafiky
            document.getElementById(`count-${index}`).innerText = newCount;
            updateDisplay();
        }

        function updateDisplay() {
            document.getElementById('display-money').innerText = formatMoney(money);
            
            // Spoƒç√≠tat √∫tratu
            let spent = INITIAL_MONEY - money;
            document.getElementById('cart-total-preview').innerText = `√ötrata: ${formatMoney(spent)} (Rozklikni)`;
            document.getElementById('cart-total-final').innerText = formatMoney(spent);

            // Vykreslit √∫ƒçtenku
            const list = document.getElementById('receipt-list');
            list.innerHTML = '';
            let isEmpty = true;

            for (let itemName in cart) {
                if (cart[itemName] > 0) {
                    isEmpty = false;
                    let item = items.find(i => i.name === itemName);
                    list.innerHTML += `
                        <div class="receipt-item">
                            <span>${cart[itemName]}x ${itemName}</span>
                            <span>${formatMoney(item.price * cart[itemName])}</span>
                        </div>
                    `;
                }
            }
            
            if (isEmpty) list.innerHTML = "<p>Zat√≠m jsi nic nekoupil...</p>";
        }

        function checkout() {
            if (money === INITIAL_MONEY) {
                alert("Ko≈°√≠k je pr√°zdn√Ω! Kup si aspo≈à rohl√≠k.");
                return;
            }

            const modal = document.getElementById('payment-modal');
            const text = document.getElementById('modal-text');
            const sub = document.getElementById('modal-subtext');
            const closeBtn = document.getElementById('modal-close');
            const spinner = document.querySelector('.spinner');

            modal.style.display = 'flex';
            closeBtn.style.display = 'none';
            spinner.style.display = 'block';
            text.innerText = "Zpracov√°v√°m platbu...";
            sub.innerText = "Spojuji se s bankou...";

            // Animace (fale≈°n√°)
            setTimeout(() => { sub.innerText = "Ovƒõ≈ôuji z≈Østatek..."; }, 1500);
            setTimeout(() => { sub.innerText = "Tisknu √∫ƒçtenku..."; }, 3000);
            setTimeout(() => {
                spinner.style.display = 'none';
                text.innerText = "PLATBA √öSPƒö≈†N√Å! ‚úÖ";
                sub.innerText = "Pƒõkn√Ω zbytek ≈æivota. Pr√°vƒõ jsi utratil majlant.";
                closeBtn.style.display = 'block';
            }, 4500);
        }

        function closeModal() {
            document.getElementById('payment-modal').style.display = 'none';
        }

        function resetGame() {
            money = INITIAL_MONEY;
            cart = {};
            initShop(); // Vyresetuje poƒç√≠tadla na 0
            updateDisplay();
        }

        function startGame() {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('game-spend').style.display = 'block';
            resetGame(); // V≈ædy zaƒç√≠t ƒçistƒõ
        }

        function goHome() {
            document.getElementById('main-menu').style.display = 'block';
            document.getElementById('game-spend').style.display = 'none';
            resetGame(); // Vymazat progres
        }

        function toggleReceipt() {
            document.getElementById('receipt-panel').classList.toggle('open');
        }

        function toggleQR() {
            const qr = document.getElementById('qr-display');
            qr.style.display = qr.style.display === 'block' ? 'none' : 'block';
        }

        function formatMoney(amount) {
            return amount.toLocaleString('cs-CZ') + " Kƒç";
        }

        // Spustit p≈ôi naƒçten√≠
        initShop();
    </script>
</body>
</html>
